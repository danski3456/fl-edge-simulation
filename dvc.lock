schema: '2.0'
stages:
  download_data:
    cmd: python src/setup/download_dataset.py
    deps:
    - path: src/datasets
      md5: 9c0bc16268f8ebd7ccf00fd6b64655e9.dir
      size: 6732
      nfiles: 6
    - path: src/setup/download_dataset.py
      md5: 1f33bd10e776c5ab04e875d1799e55dc
      size: 163
    params:
      params.yaml:
        dataset_name: mnist
    outs:
    - path: assets/raw_datasets/mnist
      md5: ef50dfefcc25e2e7865d16dfc852a4f2.dir
      size: 133089540
      nfiles: 16
  original_assignment:
    cmd: python src/setup/generate_assignment.py
    deps:
    - path: assets/raw_datasets/mnist
      md5: ef50dfefcc25e2e7865d16dfc852a4f2.dir
      size: 133089540
      nfiles: 16
    - path: src/setup/generate_assignment.py
      md5: d0f3b65e47813c9ce98fb8ed3e98043c
      size: 1860
    params:
      params.yaml:
        arrival_rate:
          type: constant
          quantity: 100
        dataset_name: mnist
        num_clients: 6
        timeslots: 20
    outs:
    - path: assets/original_assignment/mnist/original_assignment.csv
      md5: bce9039b755dcf39732f84ee6c1d308d
      size: 147784
  final_assignment:
    cmd: python src/policies/apply.py
    deps:
    - path: assets/original_assignment/mnist/
      md5: 9774a510b94f8049a8200bd9129d0bae.dir
      size: 147809
      nfiles: 2
    - path: src/policies/
      md5: 6001a08de742847ba51291f9c4ecc725.dir
      size: 9420
      nfiles: 8
    params:
      params.yaml:
        cache_capacity:
          type: constant
          quantity: 500
        dataset_name: mnist
        fl_rounds:
        - 0
        - 5
        - 10
        - 15
        - 19
        num_clients: 6
        timeslots: 20
    outs:
    - path: assets/final_assignment/mnist/final_assignment.json
      md5: 3e449c3af76e32399ba83833ec86c95d
      size: 69787
  simulate:
    cmd: python src/simulation.py
    deps:
    - path: assets/final_assignment/mnist/
      md5: 669d36fe6866ab2afb7515c3c3e96a20.dir
      size: 69810
      nfiles: 2
    - path: src/flower/
      md5: 183f5e573b02904446fe0491520a0f57.dir
      size: 9331
      nfiles: 4
    - path: src/simulation.py
      md5: b33b28fccb514027945a5977ac1f3084
      size: 977
    params:
      params.yaml:
        dataset_name: mnist
        fl_rounds:
        - 0
        - 5
        - 10
        - 15
        - 19
        model_name: mnist
        num_clients: 6
    outs:
    - path: assets/metrics/
      md5: bc570dad141cce33b85c3194c72a7716.dir
      size: 3811
      nfiles: 7
  report:
    cmd: python src/reports/data_distributions.py && python src/reports/training.py
    deps:
    - path: assets/metrics/
      md5: bc570dad141cce33b85c3194c72a7716.dir
      size: 3811
      nfiles: 7
    - path: src/reports
      md5: 73c72ca06d37f498d058dbb64e8ae41c.dir
      size: 2942
      nfiles: 2
    params:
      params.yaml:
        dataset_name: mnist
        num_clients: 6
    outs:
    - path: assets/reports/images/mnist
      md5: f58e5342ec69673296994e628f7593a7.dir
      size: 30844
      nfiles: 1
