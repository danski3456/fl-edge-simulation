schema: '2.0'
stages:
  download_data:
    cmd: python src/setup/download_dataset.py
    deps:
    - path: src/datasets
      md5: ed2b81c5337cf6cdc336b41f52174f27.dir
      size: 9770
      nfiles: 6
    - path: src/setup/download_dataset.py
      md5: 1f33bd10e776c5ab04e875d1799e55dc
      size: 163
    params:
      params.yaml:
        dataset_name: mnist
    outs:
    - path: assets/raw_datasets/mnist
      md5: ef50dfefcc25e2e7865d16dfc852a4f2.dir
      size: 133089540
      nfiles: 16
  original_assignment:
    cmd: python src/setup/generate_assignment.py
    deps:
    - path: assets/raw_datasets/mnist
      md5: ef50dfefcc25e2e7865d16dfc852a4f2.dir
      size: 133089540
      nfiles: 16
    - path: src/setup/generate_assignment.py
      md5: 4196d13c38c9921d774b18d31ad599b6
      size: 2398
    params:
      params.yaml:
        arrival_rate:
          type: constant
          quantity: 100
        dataset_name: mnist
        iid: false
        num_clients: 6
        timeslots: 10
    outs:
    - path: assets/original_assignment/mnist/original_assignment.csv
<<<<<<< Updated upstream
      md5: 1018ad3195db554643e11af3f25101e6
      size: 70659
=======
      md5: f0f4f57edb34c93a42288b69c57c6e35
      size: 147386
>>>>>>> Stashed changes
  final_assignment:
    cmd: python src/policies/apply.py
    deps:
    - path: assets/original_assignment/mnist/
<<<<<<< Updated upstream
      md5: c7cc17e1895c8c026f2607bac3fda449.dir
      size: 70684
=======
      md5: f9d3279a58753a3239906764813a9fb9.dir
      size: 147411
>>>>>>> Stashed changes
      nfiles: 2
    - path: src/policies/
      md5: 492c5c06aa89f70a3dde185538e45ad5.dir
      size: 18701
      nfiles: 11
    params:
      params.yaml:
        cache_capacity:
          type: constant
          quantity: 500
        dataset_name: mnist
        fl_rounds:
        - 0
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        - 8
        - 9
<<<<<<< Updated upstream
=======
        - 10
        - 11
        - 12
        - 13
        - 14
        - 15
        - 16
        - 17
        - 18
        - 19
>>>>>>> Stashed changes
        num_clients: 6
        timeslots: 10
        topology: ring
    outs:
    - path: assets/final_assignment/mnist/final_assignment.json
<<<<<<< Updated upstream
      md5: 64eff60d68599c40bae34f43f489e657
      size: 90430
=======
      md5: 39432df29241161920b5fbc68d8d1e24
      size: 182511
>>>>>>> Stashed changes
  simulate:
    cmd: python src/simulations/federated_learning.py && python src/simulations/central_server.py
    deps:
    - path: assets/final_assignment/mnist/
<<<<<<< Updated upstream
      md5: c2c9ba0fa0447368c31778fb602b557a.dir
      size: 90453
=======
      md5: 9ff46c0e11ef63f531f254347fb8f831.dir
      size: 182534
>>>>>>> Stashed changes
      nfiles: 2
    - path: src/flower/
      md5: c95f428f8d6427659cf00fd3f90d3a66.dir
      size: 9502
      nfiles: 4
    - path: src/simulations/
      md5: 937b017af016d536724c9923a2270fdf.dir
      size: 2156712
      nfiles: 37
    params:
      params.yaml:
        dataset_name: mnist
        fl_rounds:
        - 0
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        - 8
        - 9
<<<<<<< Updated upstream
=======
        - 10
        - 11
        - 12
        - 13
        - 14
        - 15
        - 16
        - 17
        - 18
        - 19
>>>>>>> Stashed changes
        model_name: mnist_conv
        num_clients: 6
    outs:
    - path: assets/metrics/train
<<<<<<< Updated upstream
      md5: baf876733e9b56b92f3bc34d53541129.dir
      size: 13409
      nfiles: 8
    - path: assets/models/
      md5: c8b3e8bdec2721cf8ae6310931acf5a9.dir
=======
      md5: 6fe525083748f26ddd956106f2820728.dir
      size: 26692
      nfiles: 8
    - path: assets/models/
      md5: 1ccea74f66da401b70cf07dc98a84cba.dir
>>>>>>> Stashed changes
      size: 234452
      nfiles: 2
  report:
    cmd: python src/reports/data_distributions.py && python src/reports/training.py
      && python src/reports/confusion_matrix.py
    deps:
    - path: assets/metrics/train
<<<<<<< Updated upstream
      md5: baf876733e9b56b92f3bc34d53541129.dir
      size: 13409
=======
      md5: 6fe525083748f26ddd956106f2820728.dir
      size: 26692
>>>>>>> Stashed changes
      nfiles: 8
    - path: src/reports
      md5: eb52ee8f4438d40cca4cc116c8af30ee.dir
      size: 7611
      nfiles: 37
    params:
      params.yaml:
        dataset_name: mnist
        num_clients: 6
    outs:
    - path: assets/metrics/test/central/metrics.json
<<<<<<< Updated upstream
      md5: 5cb7a0ead35b1582cde0cdf200956468
      size: 39
    - path: assets/metrics/test/federated/metrics.json
      md5: 6e553f4071d426e787681855df6c5c04
      size: 38
    - path: assets/reports/images/mnist
      md5: a8b600e36c2067e4680c41bd98d286cc.dir
      size: 202594
=======
      md5: 24a4dac87d2f4852b854f12d5f6a5ebe
      size: 39
    - path: assets/metrics/test/federated/metrics.json
      md5: c8e5b44093eb6c8fa8a18359210ae995
      size: 40
    - path: assets/reports/images/mnist
      md5: bb2402e47135a5bed66dad54bd407a3e.dir
      size: 223809
>>>>>>> Stashed changes
      nfiles: 5
